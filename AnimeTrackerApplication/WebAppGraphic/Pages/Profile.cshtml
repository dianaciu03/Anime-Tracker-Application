@page
@using Logic.Animes
@using Logic.Characters
@using Logic.Mangas
@using Logic.Profiles
@model WebAppGraphic.Pages.ProfileModel
@{
	Layout = "_LayoutLogout";
}

<div class="background-img-profile"></div>
<div class="profile-container">
    <div class="profile-header">
        <label class="username" asp-for="CurrentUser.Profile.Username">@Model.CurrentUser.Profile.Username</label>
        <p class="join-date" asp-for="CurrentUser.JoinDate">Joined: @Model.CurrentUser.JoinDateParsed()</p>
    </div>
    <div class="statistics-box text-white">
        <h2 class="statistics-title text-center">Life on Anime</h2>
        <div class="watch-time-details text-center">
            <span>@Model.CurrentUser.Profile.CalculateAnimeMinutes() minutes</span>
            <span>@Model.CurrentUser.Profile.CalculateAnimeHours() hours</span>
            <span>@Model.CurrentUser.Profile.CalculateAnimeDays() days</span>
            <span>@Model.CurrentUser.Profile.CalculateAnimeMonths() months</span>
            <span>@Model.CurrentUser.Profile.CalculateAnimeYears() years</span>
        </div>
    </div>
    @foreach(CustomList list in Model.CurrentUser.Profile.GetAllCustomLists()) 
    {
        <h1 class="second-title text-white">@list.Name</h1>
        <div class="container-fluid container-display bg-dark">

            @if(list.ContentType == "Anime") 
            {
                @foreach (object content in list.GetAllContent()) 
                {
                    Anime anime = (Anime)content;
                    <a asp-page="ContentDetails" asp-route-id="@anime.Id">
                        <div class="d-flex flex-column align-items-center">
                            <img src="@anime.ImageURL" style="width: 190px; height: 260px;" />
                            <p style=" padding-top: 8px">@anime.Name</p>
                            <p>@anime.SeasonAnime @anime.ReleaseYear</p>
                        </div>
                    </a>
                }
            }
            else if (list.ContentType == "Manga") 
            {
                @foreach (object content in list.GetAllContent())
                {
                    Manga manga = (Manga)content;
                    <a asp-page="ContentDetailsManga" asp-route-id="@manga.Id">
                        <div class="d-flex flex-column align-items-center">
                            <img src="@manga.ImageURL" style="width: 190px; height: 260px;" />
                            <p style=" padding-top: 8px">@manga.Name</p>
                            <p>@manga.Rating / 5 ⭐</p>
                        </div>
                    </a>
                }
            }
            else if (list.ContentType == "Character") 
            {
                @foreach (object content in list.GetAllContent())
                {
                    Character character = (Character)content;
                }
            }
        </div>
    }
</div>

